{"version":3,"sources":["ably.js","feature/world/road_0.png","feature/player/player_walk.png","data/soundfx/DM-CGS-45.wav","data/soundfx/DM-CGS-18.wav","feature/popup/index.js","feature/player/reducer.js","feature/map/reducer.js","feature/navigation/reducer.js","config/global-reducer.js","config/store.js","util/index.js","feature/constants/index.js","feature/player/movement.js","feature/player/index.js","data/maps/index.js","feature/map/index.js","feature/world/index.js","App.js","index.js"],"names":["window","Ably","Realtime","ABLY_API_KEY","module","exports","connect","state","user","props","useState","inputValue","setInputValue","className","type","placeholder","onChange","e","target","value","onClick","length","dispatch","payload","username","localStorage","setItem","location","reload","disabled","initialState","position","spriteLocation","walkingIndex","steps","playerReducer","tiles","score","JSON","parse","getItem","level","isPlaying","initialTimeState","timer","initialSoundState","volume","initialUserState","initialMemberState","members","initialGameState","endGame","appReducer","combineReducers","player","map","control","global","timing","sound","store","createStore","action","__REDUX_DEVTOOLS_EXTENSION__","getSpriteTile","getNewPosition","oldPos","direction","postion","SPRITE_SIZE","require","playerSteps","levelComplete","UIFx","leveComp","throttleMs","gameCompleted","gameComplete","connection","on","stateChange","console","log","current","outboundChannel","channels","get","result","characters","charactersLength","i","charAt","Math","floor","random","channelId","getCurrentTiles","getState","handleWin","newPos","x","getNextTiles","play","publish","isCompleted","timeSpent","err","error","alert","directionMove","getWalkIndex","walkingSteps","attemptMove","MAP_HEIGHT","MAP_WIDTH","observeBoundaries","observeImpassable","handleKeyDown","preventDefault","keyCode","keyPress","addEventListener","movement","useEffect","inboundChannel","subscribe","message","data","removeItem","presence","enterClient","style","top","left","backgroundImage","walkSprite","backgroundPosition","width","height","MapTiles","MapRow","tile","index","key","clear","row","World","borderRadius","margin","boxShadow","background","App","path","ReactDOM","render","document","getElementById"],"mappings":"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,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAGxC,CAClB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAGxC,CAClB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAGxC,CAClB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAGxC,CAClB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAGxC,CAClB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,KC/ExDuG,G,MAAW,SAAAlI,GACb,OACI,yBACII,UAAS,eAAUmD,EAAcvD,EAAMU,YAI7CyH,EAAS,SAAAnI,GACX,OACI,yBAAKI,UAAU,MAAMsH,MAAO,CAAEO,OJbX,KIcdjI,EAAM2B,MAAMmB,KAAI,SAACsF,EAAMC,GAAP,OACb,kBAAC,EAAD,CAAUC,IAAKD,EAAO3H,MAAO0H,SAoD9BvI,eAXS,SAAAC,GACpB,MAAO,CACHkC,MAAOlC,EAAMiD,QAAQf,MACrBL,MAAO7B,EAAMgD,IAAInB,MACjBC,MAAO9B,EAAMiD,QAAQnB,MACrBK,UAAWnC,EAAMkD,OAAOf,UACxBE,MAAOrC,EAAMmD,OAAOd,MACpBO,QAAS5C,EAAM4C,QAAQA,WAIhB7C,EA9CH,SAAAG,GAWR,OAVAkH,qBAAU,WACN/D,EAAMtC,SAAS,CACXR,KAAM,YACNS,QAAS,CAAEa,WAEX3B,EAAM0C,SACN1B,aAAauH,UAElB,CAACvI,EAAM4B,MAAO5B,EAAM0C,UAGnB,yBACIgF,MAAO,CACHpG,SAAU,WACVqG,IAAK,MACLC,KAAM,MACNI,MJpCSpE,IIqCTqE,OJtCUrE,OIyCZ5D,EAAM0C,SACJ1C,EAAM2B,MAAM3B,EAAMgC,QAClBhC,EAAM2B,MAAM3B,EAAMgC,OAAOc,KAAI,SAAC0F,EAAKH,GAAN,OACzB,kBAAC,EAAD,CAAQC,IAAKD,EAAO1G,MAAO6G,OAElCxI,EAAM0C,SACH,wBAAItC,UAAU,OAAd,oEChBDqI,EA5BD,WACV,IAAM1H,EAAWoC,EAAMqC,WAAWzF,KAAKgB,SAEvC,OACI,yBACIX,UAAU,QACVsH,MAAO,CACHpG,SAAU,WACV0G,MLVSpE,IKWTqE,OLZUrE,IKaV8E,aAAc,MACdC,OAAQ,YACRC,UAAW,yBACXf,gBAAgB,OAAD,OAASgB,IAAT,OAGjB9H,EAGE,oCACI,kBAAC,EAAD,MACA,kBAAC,EAAD,OAJJ,kBAAC,EAAD,Q,gBCFD+H,MAff,WAEI,OACI,kBAAC,IAAD,KACI,6BACI,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAOC,KAAK,KACR,kBAAC,EAAD,WCRxBlF,EAAQ,IAERmF,IAASC,OAAO,kBAAC,IAAD,CAAU9F,MAAOA,GAAO,kBAAC,EAAD,OAAmB+F,SAASC,eAAe,W","file":"static/js/main.feccfbeb.chunk.js","sourcesContent":["import { Realtime } from 'ably/browser/static/ably-commonjs.js'\nimport { ABLY_API_KEY } from './key'\n\nwindow.Ably = new Realtime(`${ABLY_API_KEY}`)","module.exports = __webpack_public_path__ + \"static/media/road_0.cdfb2ff8.png\";","module.exports = __webpack_public_path__ + \"static/media/player_walk.9f19440f.png\";","module.exports = __webpack_public_path__ + \"static/media/DM-CGS-45.022609e8.wav\";","module.exports = __webpack_public_path__ + \"static/media/DM-CGS-18.52ceb82a.wav\";","import React, { useState } from 'react'\nimport './index.css'\nimport { connect } from 'react-redux'\nconst Popup = props => {\n    const [inputValue, setInputValue] = useState('')\n\n    const submitUserDetails = () => {\n        inputValue.length > 0 &&\n            props.dispatch({\n                type: 'USERNAME',\n                payload: {\n                    username: inputValue,\n                },\n            })\n        localStorage.setItem('username', inputValue)\n        window.location.reload(true)\n    }\n\n    return (\n        <div className=\"pop-wrapper\">\n            <h5>Enter Your Nickname to Play {inputValue}</h5>\n            <input\n                type=\"text\"\n                placeholder=\"otuka\"\n                onChange={e => setInputValue(e.target.value)}\n            />\n            <br></br>\n            <button onClick={submitUserDetails} disabled={!inputValue}>\n                Join\n            </button>\n        </div>\n    )\n}\n\nconst mapStateToProps = state => ({\n    ...state.user,\n})\n\nexport default connect(mapStateToProps)(Popup)\n","const initialState = {\n    position : [0, 0],\n    spriteLocation: '0px 0px',\n    walkingIndex: 0,\n    steps: 0\n}\n\nconst playerReducer = (state = initialState, {type, payload}) => {\n    switch(type){\n        case 'MOVE_PLAYER': \n            return {...payload}\n        default: \n        return state\n    }\n}\n\n\n\nexport default playerReducer","const initialState = {\n    tiles: [],\n}\n\nexport default (state = initialState, { type, payload }) => {\n    switch (type) {\n        case 'ADD_TILES':\n            return { ...payload }\n\n        default:\n            return state\n    }\n}\n","const score  = JSON.parse(localStorage.getItem('score'))\nconst level =  JSON.parse(localStorage.getItem('level'))\n\nconst initialState = {\n    score: score || 0,\n    level: level || 0,\n}\n\nexport default (state = initialState, { type, payload }) => {\n    switch (type) {\n        case 'UPDATE_SCORE':\n            return { ...payload }\n        default:\n            return state\n    }\n}\n","const isPlaying = JSON.parse(localStorage.getItem('isPlaying'))\nconst initialState = {\n    isPlaying: isPlaying || false,\n}\n\n\nexport default (state = initialState, { type, payload }) => {\n    switch (type) {\n        case 'PLAY':\n            return { ...payload }\n        default:\n            return state\n    }\n}\n\n\nconst initialTimeState = {\n    timer: 0\n}\n\nexport const timeReducer = (state = initialTimeState, { type, payload }) => {\n    switch (type) {\n        case 'TIMER':\n            return { ...payload }\n        default:\n            return state\n    }\n}\n\nconst initialSoundState = {\n    volume: 1.0\n}\n\nexport const soundReducer = (state = initialSoundState, { type, payload }) => {\n    switch (type) {\n        case 'SOUND_CONTROL':\n            return { ...payload }\n        default:\n            return state\n    }\n}\n\nconst username = localStorage.getItem('username')\nconst initialUserState = {\n    username: username || ''\n}\n\nexport const userReducer = (state = initialUserState, { type, payload }) => {\n    switch (type) {\n        case 'USERNAME':\n            return { ...payload }\n        default:\n            return state\n    }\n}\n\n\nconst initialMemberState = {\n    members: [] \n}\n\nexport const membersReducer = (state = initialMemberState, { type, payload }) => {\n    switch (type) {\n        case 'MEMBERS_PRESENCE':\n            return { ...payload }\n        default:\n            return state\n    }\n}\n\nconst initialGameState = {\n    endGame: false\n}\n\nexport const endGameReducer = (state = initialGameState, { type, payload }) => {\n    switch (type) {\n        case 'END_GAME':\n            return { ...payload }\n        default:\n            return state\n    }\n}\n","import { createStore, combineReducers } from 'redux'\nimport playerReducer from '../feature/player/reducer'\nimport mapReducer from '../feature/map/reducer'\nimport controllReducer from '../feature/navigation/reducer'\nimport globalReducer, { timeReducer, soundReducer, userReducer, membersReducer, endGameReducer } from './global-reducer'\n\nconst appReducer = combineReducers({\n    player: playerReducer,\n    map: mapReducer,\n    control: controllReducer,\n    global: globalReducer,\n    timing: timeReducer,\n    sound: soundReducer,\n    user: userReducer,\n    members: membersReducer,\n    endGame: endGameReducer\n})\n\nconst rootReducer = (state, action) => {\n    return appReducer(state, action)\n}\n\nconst store = createStore(\n    rootReducer,\n    window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n)\n\nexport default store\n","import { SPRITE_SIZE } from \"../feature/constants\"\n\nexport const getSpriteTile = type => {\n    switch (type) {\n        case 0:\n            return 'stones'\n        case 2: \n            return 'finish'\n        default:\n            return 'default'\n    }\n}\n\n\nexport const getNewPosition = (oldPos, direction, walkingIndex) => {\n    switch (direction) {\n        case 'NORTH':\n            return {\n                postion: [oldPos[0] - SPRITE_SIZE, oldPos[1]],\n                location: `${SPRITE_SIZE * walkingIndex}px ${SPRITE_SIZE *\n                    3}px`,\n            }\n        case 'SOUTH':\n            return {\n                postion: [oldPos[0] + SPRITE_SIZE, oldPos[1]],\n                location: `${SPRITE_SIZE * walkingIndex}px ${SPRITE_SIZE *\n                    0}px`,\n            }\n        case 'WEST':\n            return {\n                postion: [oldPos[0], oldPos[1] - SPRITE_SIZE],\n                location: `${SPRITE_SIZE * walkingIndex}px ${SPRITE_SIZE *\n                    2}px`,\n            }\n        case 'EAST':\n            return {\n                postion: [oldPos[0], oldPos[1] + SPRITE_SIZE],\n                location: `${SPRITE_SIZE * walkingIndex}px ${SPRITE_SIZE *\n                    1}px`,\n            }\n        default:\n            return {\n                postion: [0, 0],\n                location: '0px 0px',\n            }\n    }\n}\n\nexport const random = max => Math.floor(Math.random() * Math.floor(max))\nexport const channelId = length => {\n    var result = ''\n    var characters =\n        'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'\n    var charactersLength = characters.length\n    for (var i = 0; i < length; i++) {\n        result += characters.charAt(\n            Math.floor(Math.random() * charactersLength)\n        )\n    } \n    return result\n}\n","export const LEFT_KEY = 37\nexport const RIGHT_KEY = 39\nexport const UP_KEY = 38\nexport const DOWN_KEY = 40\nexport const SPRITE_SIZE = 40\nexport const MAP_HEIGHT = SPRITE_SIZE * 12\nexport const MAP_WIDTH = SPRITE_SIZE * 20\n","import {\n    LEFT_KEY,\n    RIGHT_KEY,\n    UP_KEY,\n    DOWN_KEY,\n    SPRITE_SIZE,\n    MAP_HEIGHT,\n    MAP_WIDTH,\n} from '../constants'\nimport store from '../../config/store'\nimport leveComp from '../../data/soundfx/DM-CGS-45.wav'\nimport gameComplete from '../../data/soundfx/DM-CGS-18.wav'\nimport { getNewPosition, channelId } from '../../util'\nimport UIFx from 'uifx'\nrequire('../../ably')\n\nconst localPlayerSteps = JSON.parse(localStorage.getItem('steps'))\nlet playerSteps = localPlayerSteps || 0\n\nexport const movement = player => {\n    const levelComplete = new UIFx(leveComp, { throttleMs: 50 })\n    const gameCompleted = new UIFx(gameComplete, { throttleMs: 100 })\n\n    window.Ably.connection.on(function(stateChange) {\n        console.log('New connection state is ' + stateChange.current)\n    })\n\n    const outboundChannel = window.Ably.channels.get(\n        'cloudflare:worker:' + channelId(6)\n    )\n\n    const getCurrentTiles = () => {\n        const level = store.getState().control.level\n        return store.getState().map.tiles[level]\n    }\n\n    const observeBoundaries = newPos => {\n        return (\n            newPos[0] >= 0 &&\n            newPos[0] <= MAP_HEIGHT - SPRITE_SIZE &&\n            newPos[1] >= 0 &&\n            newPos[1] <= MAP_WIDTH - SPRITE_SIZE\n        )\n    }\n\n    const getNextTiles = newPos => {\n        const tiles = getCurrentTiles()\n        const x = newPos[1] / SPRITE_SIZE\n        const y = newPos[0] / SPRITE_SIZE\n        const nextTiles = tiles[y][x]\n        return nextTiles\n    }\n\n    const handleWin = newPos => {\n        const tiles = store.getState().map.tiles\n        const level = store.getState().control.level\n        const volume = store.getState().sound.volume\n        const timer = store.getState().timing.timer\n        const username = store.getState().user.username\n        const score = store.getState().control.score\n        const nextTiles = getNextTiles(newPos)\n        if (nextTiles === 2) {\n            if (tiles.length > level + 1) {\n                window.localStorage.setItem('level', level + 1)\n                window.localStorage.setItem('score', score)\n                window.localStorage.setItem('isComplete', true)\n                levelComplete.play(volume)\n\n                store.dispatch({\n                    type: 'UPDATE_SCORE',\n                    payload: {\n                        level: level + 1,\n                        score: score + 10,\n                    },\n                })\n                outboundChannel.publish(\n                    'player',\n                    {\n                        username,\n                        isCompleted: true,\n                        timeSpent: timer,\n                        playerSteps,\n                    },\n                    err => {\n                        if (err) {\n                            return console.error('Failed to publish', err)\n                        }\n                        console.log('published')\n                    }\n                )\n                return window.alert(\n                    ` Level ${level + 1} complete successfully! ${timer}`\n                )\n            }\n            store.dispatch({\n                type: 'PLAY',\n                payload: {\n                    isPlaying: false,\n                },\n            })\n            gameCompleted.play(volume)\n            return window.alert('Game Complete!')\n        }\n    }\n    const observeImpassable = newPos => {\n        const tiles = getCurrentTiles()\n        const x = newPos[1] / SPRITE_SIZE\n        const y = newPos[0] / SPRITE_SIZE\n        const nextTiles = tiles[y][x]\n        return nextTiles === 0 ? false : true\n    }\n\n    const getWalkIndex = () => {\n        const walkingIndex = store.getState().player.walkingIndex\n        return walkingIndex >= 7 ? 0 : walkingIndex + 1\n    }\n\n    const directionMove = (direction, newPos) => {\n        const walkingIndex = getWalkIndex()\n        const walkingSteps = JSON.parse(localStorage.getItem('steps'))\n        store.dispatch({\n            type: 'MOVE_PLAYER',\n            payload: {\n                position: newPos,\n                direction,\n                walkingIndex,\n                spriteLocation: getNewPosition([], direction, walkingIndex)\n                    .location,\n                steps: walkingSteps,\n            },\n        })\n    }\n\n    const attemptMove = direction => {\n        const oldPos = store.getState().player.position\n        const isPlaying = store.getState().global.isPlaying\n        const newPos = getNewPosition(oldPos, direction, null).postion\n        if (\n            isPlaying &&\n            observeBoundaries(newPos) &&\n            observeImpassable(newPos)\n        ) {\n            localStorage.setItem('steps', playerSteps++)\n            handleWin(newPos)\n            return directionMove(direction, newPos)\n        }\n    }\n\n    const keyPress = e => {\n        e.preventDefault()\n        switch (e.keyCode) {\n            case LEFT_KEY:\n                return attemptMove('WEST')\n            case RIGHT_KEY:\n                return attemptMove('EAST')\n            case UP_KEY:\n                return attemptMove('NORTH')\n            case DOWN_KEY:\n                return attemptMove('SOUTH')\n            default:\n                return attemptMove(e.keyCode)\n        }\n    }\n\n    const handleKeyDown = e => {\n        const { username } = store.getState().user\n        if (username) {\n            keyPress(e)\n        }\n    }\n\n    window.addEventListener('keydown', e => {\n        handleKeyDown(e)\n    })\n\n    return player\n}\n","import React, { useEffect } from 'react'\nimport walkSprite from './player_walk.png'\nimport { connect } from 'react-redux'\nimport { movement } from './movement'\nimport store from '../../config/store'\n\nconst Player = props => {\n    useEffect(() => {\n        const username = localStorage.getItem('username')\n        if (username) {\n            const inboundChannel = window.Ably.channels.get('cloudflare-bot')\n            inboundChannel.subscribe(function(message) {\n                if (message.data.endGame) {\n                    localStorage.removeItem('username')\n                    store.dispatch({\n                        type: 'PLAY',\n                        payload: {\n                            isPlaying: message.data.isPlaying,\n                        },\n                    })\n                    store.dispatch({\n                        type: 'END_GAME',\n                        payload: {\n                           endGame: message.data.endGame\n                        },\n                    })\n                    store.dispatch({\n                        type: 'USERNAME',\n                        payload: {\n                           username: null\n                        },\n                    })\n                  \n                }\n            })\n            inboundChannel.presence.enterClient(username)\n        }\n    }, [])\n    return (\n        <>\n            <div\n                style={{\n                    position: 'absolute',\n                    top: props.position[0],\n                    left: props.position[1],\n                    backgroundImage: `url('${walkSprite}')`,\n                    backgroundPosition: props.spriteLocation,\n                    width: '40px',\n                    height: '40px',\n                }}\n            />\n        </>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        ...state.player,\n        members: state.members,\n        isPlaying: state.global.isPlaying,\n        timer: state.timing.timer,\n    }\n}\n\nexport default connect(mapStateToProps)(movement(Player))\n","export const level1 = [\n    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0],\n    [1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],\n    [1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],\n    [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],\n    [0, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],\n    [0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n]\n\nexport const level2 = [\n    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],\n    [1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],\n    [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],\n    [0, 1, 0, 0, 0, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],\n    [0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n]\n\nexport const level3 = [\n    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],\n    [1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],\n    [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 1, 0],\n    [0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],\n    [0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n]\n\nexport const level4 = [\n    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2],\n    [1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],\n    [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],\n    [0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],\n    [0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n]\n\nexport const level5 = [\n    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],\n    [1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],\n    [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],\n    [0, 1, 0, 0, 0, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],\n    [0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n]\n\nexport const level6 = [\n    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],\n    [1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],\n    [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],\n    [0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],\n    [0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [0, 1, 1, 1, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n]\n\nexport const tiles = [level1, level2, level3, level4, level5, level6]","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { SPRITE_SIZE, MAP_WIDTH, MAP_HEIGHT } from '../constants'\nimport { getSpriteTile } from '../../util'\nimport { tiles } from '../../data/maps'\nimport store from '../../config/store'\nimport './index.css'\n\nconst MapTiles = props => {\n    return (\n        <div\n            className={`tile ${getSpriteTile(props.value)}`}\n        />\n    )\n}\nconst MapRow = props => {\n    return (\n        <div className=\"row\" style={{ height: SPRITE_SIZE }}>\n            {props.tiles.map((tile, index) => (\n                <MapTiles key={index} value={tile} />\n            ))}\n        </div>\n    )\n}\n\nconst Map = props => {\n    useEffect(() => {\n        store.dispatch({\n            type: 'ADD_TILES',\n            payload: { tiles },\n        })\n        if (props.endGame) {\n            localStorage.clear()\n        }\n    }, [props.score, props.endGame])\n\n    return (\n        <div\n            style={{\n                position: 'relative',\n                top: '0px',\n                left: '0px',\n                width: MAP_WIDTH,\n                height: MAP_HEIGHT,\n            }}\n        >\n            {!props.endGame &&\n                props.tiles[props.level] &&\n                props.tiles[props.level].map((row, index) => (\n                    <MapRow key={index} tiles={row} />\n                ))}\n            {props.endGame && (\n                <h1 className=\"end\">\n                    Game Over! You spent too much time trying to make a delivery\n                </h1>\n            )}\n        </div>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        level: state.control.level,\n        tiles: state.map.tiles,\n        score: state.control.score,\n        isPlaying: state.global.isPlaying,\n        timer: state.timing.timer,\n        endGame: state.endGame.endGame,\n    }\n}\n\nexport default connect(mapStateToProps)(Map)\n","import React from 'react'\nimport background from './road_0.png'\nimport { MAP_HEIGHT, MAP_WIDTH } from '../constants'\nimport Popup from '../popup'\nimport Player from '../player'\nimport Map from '../map'\nimport store from '../../config/store'\n\nconst World = () => {\n    const username = store.getState().user.username\n    \n    return (\n        <div\n            className=\"world\"\n            style={{\n                position: 'relative',\n                width: MAP_WIDTH,\n                height: MAP_HEIGHT,\n                borderRadius: '5px',\n                margin: '20px auto',\n                boxShadow: '1px -2px 13px 0px grey',\n                backgroundImage: `url(${background})`,\n            }}\n        >\n            {!username ? (\n                <Popup />\n            ) : (\n                <>\n                    <Map />\n                    <Player />\n                </>\n            )}\n        </div>\n    )\n}\n\nexport default World\n","import React from 'react'\nimport World from './feature/world'\nimport { Switch, Route, BrowserRouter as Router } from 'react-router-dom'\n\n/* function GameArea() {\n    return <></>\n}\n */\nfunction App() {\n    //const match = useRouteMatch()\n    return (\n        <Router>\n            <div>\n                <Switch>\n                    <Route path=\"/\">\n                        <World />\n                    </Route>\n                </Switch>\n            </div>\n        </Router>\n    )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n//import * as serviceWorker from './serviceWorker';\nimport { Provider } from 'react-redux'\nimport store from './config/store'\nrequire('./ably')\n\nReactDOM.render(<Provider store={store}><App/></Provider>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n"],"sourceRoot":""}