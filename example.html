<html>
  <body>
    <h1>Presence example</h1>

    <button id="get-presence">Get presence set</button>
  </body>

  <!-- Include the latest Ably Library  -->
  <script src="https://cdn.ably.io/lib/ably.min-1.js"></script>

  <!-- Instance the Ably library  -->
  <script type="text/javascript">
    alert("You need to add your API key"); /* REMOVE THIS */
    var realtime = new Ably.Realtime({
      key: "INSERT-YOUR-API-KEY-HERE", /* ADD YOUR API KEY HERE */
      clientId: "my-client-id" /* This is who you will appear as in the presence set */
    });

    /* Enter the presence set of the 'chatroom' channel */
    var channel = realtime.channels.get('chatroom');
    channel.attach(function(err) {
      if(err) { return console.error("Error attaching to the channel"); }
      console.log('We are now attached to the channel');
      channel.presence.enter('hello', function(err) {
        if(err) { return console.error("Error entering presence"); }
        console.log('We are now successfully present');
      });
    });

    /* Show presence set size when the button is pressed */
    document.getElementById("get-presence").addEventListener("click", function() {
      channel.presence.get(function(err, members) {
        if(err) { return console.log("Error fetching presence data: " + err); }
        alert('There are ' + members.length + ' clients present on this channel');
      });
    })
  </script>
</html>
